<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Travel Companion - Documentazione Progetto Android</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap');

        :root {
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --secondary: #059669;
            --accent: #8b5cf6;
            --warning: #f59e0b;
            --danger: #ef4444;
            --text: #1f2937;
            --text-light: #6b7280;
            --bg: #ffffff;
            --bg-secondary: #f9fafb;
            --border: #e5e7eb;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            line-height: 1.7;
            color: var(--text);
            background: var(--bg);
            font-size: 15px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 0 24px;
        }

        /* Cover Page */
        .cover {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 50%, #06b6d4 100%);
            color: white;
            padding: 60px 40px;
            page-break-after: always;
        }

        .cover-icon {
            font-size: 80px;
            margin-bottom: 30px;
        }

        .cover h1 {
            font-size: 3.5em;
            font-weight: 700;
            margin-bottom: 15px;
            letter-spacing: -1px;
        }

        .cover-subtitle {
            font-size: 1.5em;
            font-weight: 300;
            opacity: 0.95;
            margin-bottom: 40px;
        }

        .cover-meta {
            display: flex;
            gap: 30px;
            flex-wrap: wrap;
            justify-content: center;
            margin-bottom: 50px;
        }

        .cover-meta-item {
            background: rgba(255, 255, 255, 0.15);
            padding: 12px 24px;
            border-radius: 50px;
            font-size: 0.95em;
        }

        .tech-stack {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            justify-content: center;
            margin-top: 30px;
        }

        .tech-badge {
            background: rgba(255, 255, 255, 0.2);
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 0.85em;
            font-weight: 500;
            backdrop-filter: blur(10px);
        }

        .cover-footer {
            margin-top: auto;
            padding-top: 40px;
            font-size: 0.9em;
            opacity: 0.8;
        }

        /* Main Content */
        .content {
            padding: 60px 0;
        }

        h1 {
            font-size: 2.2em;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 3px solid var(--primary);
        }

        h2 {
            font-size: 1.75em;
            font-weight: 600;
            color: var(--text);
            margin-top: 50px;
            margin-bottom: 25px;
            padding-left: 16px;
            border-left: 4px solid var(--primary);
        }

        h3 {
            font-size: 1.35em;
            font-weight: 600;
            color: var(--secondary);
            margin-top: 35px;
            margin-bottom: 18px;
        }

        h4 {
            font-size: 1.1em;
            font-weight: 600;
            color: var(--text);
            margin-top: 25px;
            margin-bottom: 12px;
        }

        p {
            margin-bottom: 16px;
            text-align: justify;
            color: var(--text);
        }

        ul,
        ol {
            margin-left: 24px;
            margin-bottom: 16px;
        }

        li {
            margin-bottom: 10px;
            color: var(--text);
        }

        /* Table of Contents */
        .toc {
            background: var(--bg-secondary);
            border-radius: 16px;
            padding: 35px 40px;
            margin: 40px 0;
            page-break-after: always;
        }

        .toc h2 {
            margin-top: 0;
            border-left: none;
            padding-left: 0;
            text-align: center;
            margin-bottom: 30px;
        }

        .toc-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px 40px;
        }

        .toc-item {
            display: flex;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px dashed var(--border);
            text-decoration: none;
            color: var(--text);
            transition: color 0.2s;
        }

        .toc-item:hover {
            color: var(--primary);
        }

        .toc-number {
            background: var(--primary);
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8em;
            font-weight: 600;
            margin-right: 12px;
            flex-shrink: 0;
        }

        /* Code Blocks */
        .code-block {
            background: #1e293b;
            color: #e2e8f0;
            border-radius: 12px;
            padding: 20px 24px;
            margin: 20px 0;
            font-family: 'JetBrains Mono', 'Consolas', monospace;
            font-size: 0.85em;
            overflow-x: auto;
            line-height: 1.6;
            white-space: pre;
        }

        .code-block .keyword {
            color: #c084fc;
        }

        .code-block .string {
            color: #34d399;
        }

        .code-block .comment {
            color: #64748b;
        }

        .code-block .function {
            color: #60a5fa;
        }

        .code-block .annotation {
            color: #fbbf24;
        }

        .inline-code {
            background: #f1f5f9;
            padding: 3px 8px;
            border-radius: 6px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9em;
            color: var(--primary-dark);
        }

        /* Info Boxes */
        .info-box {
            border-radius: 12px;
            padding: 24px;
            margin: 24px 0;
            display: flex;
            gap: 16px;
        }

        .info-box-icon {
            font-size: 1.5em;
            flex-shrink: 0;
        }

        .info-box-content h4 {
            margin-top: 0;
            margin-bottom: 10px;
        }

        .info-box.primary {
            background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
            border-left: 4px solid var(--primary);
        }

        .info-box.success {
            background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);
            border-left: 4px solid var(--secondary);
        }

        .info-box.warning {
            background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%);
            border-left: 4px solid var(--warning);
        }

        .info-box.danger {
            background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);
            border-left: 4px solid var(--danger);
        }

        /* Tables */
        table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin: 24px 0;
            font-size: 0.9em;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        th {
            background: var(--primary);
            color: white;
            padding: 14px 16px;
            text-align: left;
            font-weight: 600;
        }

        td {
            padding: 14px 16px;
            border-bottom: 1px solid var(--border);
        }

        tr:nth-child(even) {
            background: var(--bg-secondary);
        }

        tr:last-child td {
            border-bottom: none;
        }

        /* Architecture Diagram */
        .architecture {
            background: var(--bg-secondary);
            border-radius: 16px;
            padding: 30px;
            margin: 30px 0;
            text-align: center;
        }

        .arch-layer {
            background: white;
            border: 2px solid var(--border);
            border-radius: 12px;
            padding: 20px;
            margin: 15px 0;
        }

        .arch-layer-title {
            font-weight: 600;
            color: white;
            padding: 8px 20px;
            border-radius: 20px;
            display: inline-block;
            margin-bottom: 15px;
            font-size: 0.9em;
        }

        .arch-layer.ui .arch-layer-title {
            background: var(--primary);
        }

        .arch-layer.domain .arch-layer-title {
            background: var(--secondary);
        }

        .arch-layer.data .arch-layer-title {
            background: var(--accent);
        }

        .arch-components {
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        .arch-component {
            background: var(--bg-secondary);
            padding: 10px 16px;
            border-radius: 8px;
            font-size: 0.85em;
            font-weight: 500;
        }

        .arch-arrow {
            font-size: 1.5em;
            color: var(--text-light);
            margin: 10px 0;
        }

        /* Feature Cards */
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin: 30px 0;
        }

        .feature-card {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 24px;
            border: 1px solid var(--border);
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .feature-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }

        .feature-icon {
            font-size: 2em;
            margin-bottom: 12px;
        }

        .feature-card h4 {
            color: var(--primary);
            margin-top: 0;
            margin-bottom: 10px;
        }

        .feature-card p {
            font-size: 0.9em;
            color: var(--text-light);
            margin-bottom: 0;
        }

        /* Screen Flow */
        .screen-flow {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
            margin: 30px 0;
            padding: 30px;
            background: var(--bg-secondary);
            border-radius: 16px;
        }

        .screen-item {
            background: white;
            padding: 12px 20px;
            border-radius: 10px;
            font-weight: 500;
            font-size: 0.9em;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        }

        .screen-arrow {
            color: var(--primary);
            font-size: 1.2em;
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin: 30px 0;
        }

        .stat-card {
            text-align: center;
            padding: 24px 16px;
            background: var(--bg-secondary);
            border-radius: 12px;
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: 700;
            color: var(--primary);
            line-height: 1;
        }

        .stat-label {
            font-size: 0.85em;
            color: var(--text-light);
            margin-top: 8px;
        }

        /* Page Break */
        .page-break {
            page-break-before: always;
        }

        /* Footer */
        .doc-footer {
            margin-top: 80px;
            padding-top: 40px;
            border-top: 2px solid var(--border);
            text-align: center;
            color: var(--text-light);
        }

        .doc-footer p {
            text-align: center;
        }

        /* Print Styles */
        @media print {
            .cover {
                min-height: auto;
                padding: 100px 40px;
            }

            .container {
                max-width: 100%;
            }

            .feature-card:hover,
            .toc-item:hover {
                transform: none;
                box-shadow: none;
            }

            h2,
            h3,
            h4 {
                page-break-after: avoid;
            }

            .code-block,
            table,
            .info-box {
                page-break-inside: avoid;
            }
        }

        /* Section Numbers */
        .section-number {
            color: var(--primary);
            font-weight: 700;
            margin-right: 8px;
        }
    </style>
</head>

<body>

    <!-- COVER PAGE -->
    <div class="cover">
        <div class="cover-icon">üß≥</div>
        <h1>Travel Companion</h1>
        <p class="cover-subtitle">Applicazione Android per il Tracciamento e la Gestione dei Viaggi</p>

        <div class="cover-meta">
            <span class="cover-meta-item">üì± Android Native</span>
            <span class="cover-meta-item">üìÖ Gennaio 2026</span>
            <span class="cover-meta-item">üî¢ Versione 1.0</span>
        </div>

        <div class="tech-stack">
            <span class="tech-badge">Kotlin 1.9</span>
            <span class="tech-badge">Jetpack</span>
            <span class="tech-badge">MVVM</span>
            <span class="tech-badge">Hilt DI</span>
            <span class="tech-badge">Room DB</span>
            <span class="tech-badge">Google Maps</span>
            <span class="tech-badge">CameraX</span>
            <span class="tech-badge">Coroutines</span>
        </div>

        <div class="cover-footer">
            <p>Documentazione Tecnica Completa</p>
            <p>Progetto Android - Mobile Development</p>
        </div>
    </div>

    <!-- TABLE OF CONTENTS -->
    <div class="container">
        <div class="toc">
            <h2>üìã Indice dei Contenuti</h2>
            <div class="toc-grid">
                <a class="toc-item" href="#intro"><span class="toc-number">1</span> Introduzione</a>
                <a class="toc-item" href="#objectives"><span class="toc-number">2</span> Obiettivi del Progetto</a>
                <a class="toc-item" href="#architecture"><span class="toc-number">3</span> Architettura</a>
                <a class="toc-item" href="#tech-stack"><span class="toc-number">4</span> Stack Tecnologico</a>
                <a class="toc-item" href="#structure"><span class="toc-number">5</span> Struttura Progetto</a>
                <a class="toc-item" href="#data-layer"><span class="toc-number">6</span> Data Layer</a>
                <a class="toc-item" href="#domain-layer"><span class="toc-number">7</span> Domain Layer</a>
                <a class="toc-item" href="#ui-layer"><span class="toc-number">8</span> UI Layer</a>
                <a class="toc-item" href="#features"><span class="toc-number">9</span> Funzionalit√†</a>
                <a class="toc-item" href="#di"><span class="toc-number">10</span> Dependency Injection</a>
                <a class="toc-item" href="#permissions"><span class="toc-number">11</span> Permessi</a>
                <a class="toc-item" href="#testing"><span class="toc-number">12</span> Testing</a>
                <a class="toc-item" href="#build"><span class="toc-number">13</span> Build &amp; Deploy</a>
                <a class="toc-item" href="#conclusion"><span class="toc-number">14</span> Conclusioni</a>
            </div>
        </div>
    </div>

    <!-- MAIN CONTENT -->
    <div class="container content">

        <!-- 1. INTRODUZIONE -->
        <h2 id="intro"><span class="section-number">1.</span> Introduzione</h2>

        <p>
            <strong>Travel Companion</strong> √® un'applicazione Android nativa sviluppata in <strong>Kotlin</strong>,
            progettata per accompagnare gli utenti durante i loro viaggi, offrendo strumenti completi per la
            pianificazione, il tracciamento GPS in tempo reale e la documentazione delle esperienze di viaggio.
        </p>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-number">6</div>
                <div class="stat-label">Tabelle Database</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">8+</div>
                <div class="stat-label">Schermate UI</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">15+</div>
                <div class="stat-label">Librerie Jetpack</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">API 26</div>
                <div class="stat-label">Min SDK</div>
            </div>
        </div>

        <div class="info-box primary">
            <span class="info-box-icon">üí°</span>
            <div class="info-box-content">
                <h4>Perch√© Travel Companion?</h4>
                <p>L'app risolve il problema di dover utilizzare multiple applicazioni per tracciare percorsi,
                    scattare foto geolocalizzate e prendere appunti durante un viaggio, unificando tutto in un'unica
                    soluzione intuitiva.</p>
            </div>
        </div>

        <!-- 2. OBIETTIVI -->
        <h2 id="objectives" class="page-break"><span class="section-number">2.</span> Obiettivi del Progetto</h2>

        <h3>2.1 Obiettivi Funzionali</h3>
        <ul>
            <li><strong>Gestione Viaggi:</strong> Creazione, modifica ed eliminazione di viaggi con informazioni
                dettagliate (titolo, destinazione, date, tipo)</li>
            <li><strong>Tracking GPS:</strong> Registrazione continua del percorso con coordinate, distanza e durata
            </li>
            <li><strong>Documentazione:</strong> Cattura di foto e annotazioni geolocalizzate durante il viaggio</li>
            <li><strong>Visualizzazione Mappa:</strong> Rappresentazione interattiva dei percorsi su Google Maps</li>
            <li><strong>Statistiche:</strong> Analisi aggregata dei dati di viaggio con grafici</li>
            <li><strong>Geofencing:</strong> Notifiche automatiche basate sulla posizione geografica</li>
        </ul>

        <h3>2.2 Obiettivi Tecnici</h3>
        <ul>
            <li>Implementazione dell'architettura <strong>Clean Architecture</strong> con pattern <strong>MVVM</strong>
            </li>
            <li>Utilizzo di <strong>Kotlin Coroutines</strong> e <strong>Flow</strong> per operazioni asincrone</li>
            <li><strong>Dependency Injection</strong> con Hilt per modularit√† e testabilit√†</li>
            <li>Persistenza dati locale con <strong>Room Database</strong></li>
            <li><strong>Foreground Service</strong> per tracking GPS in background</li>
            <li>Supporto per <strong>tema chiaro/scuro</strong> (Day/Night)</li>
        </ul>

        <h3>2.3 Requisiti Non Funzionali</h3>
        <ul>
            <li><strong>Performance:</strong> UI fluida a 60 FPS, risposta rapida alle interazioni</li>
            <li><strong>Batteria:</strong> Ottimizzazione del tracking GPS per minimizzare il consumo</li>
            <li><strong>Privacy:</strong> Tutti i dati memorizzati localmente sul dispositivo</li>
            <li><strong>Compatibilit√†:</strong> Android 8.0 (API 26) fino ad Android 14 (API 34)</li>
        </ul>

        <!-- 3. ARCHITETTURA -->
        <h2 id="architecture" class="page-break"><span class="section-number">3.</span> Architettura dell'Applicazione
        </h2>

        <p>
            L'applicazione implementa la <strong>Clean Architecture</strong> combinata con il pattern
            <strong>MVVM (Model-View-ViewModel)</strong>, garantendo separazione delle responsabilit√†,
            testabilit√† e manutenibilit√† del codice.
        </p>

        <div class="architecture">
            <div class="arch-layer ui">
                <span class="arch-layer-title">PRESENTATION LAYER (UI)</span>
                <div class="arch-components">
                    <span class="arch-component">Activities</span>
                    <span class="arch-component">Fragments</span>
                    <span class="arch-component">ViewModels</span>
                    <span class="arch-component">Adapters</span>
                </div>
            </div>

            <div class="arch-arrow">‚¨áÔ∏è LiveData / StateFlow ‚¨ÜÔ∏è</div>

            <div class="arch-layer domain">
                <span class="arch-layer-title">DOMAIN LAYER</span>
                <div class="arch-components">
                    <span class="arch-component">Models</span>
                    <span class="arch-component">Repository Interfaces</span>
                    <span class="arch-component">Use Cases</span>
                </div>
            </div>

            <div class="arch-arrow">‚¨áÔ∏è Suspend Functions ‚¨ÜÔ∏è</div>

            <div class="arch-layer data">
                <span class="arch-layer-title">DATA LAYER</span>
                <div class="arch-components">
                    <span class="arch-component">Room Database</span>
                    <span class="arch-component">DAOs</span>
                    <span class="arch-component">Entities</span>
                    <span class="arch-component">Repositories</span>
                </div>
            </div>
        </div>

        <h3>3.1 Pattern MVVM</h3>

        <table>
            <thead>
                <tr>
                    <th>Componente</th>
                    <th>Responsabilit√†</th>
                    <th>Esempio nel Progetto</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Model</strong></td>
                    <td>Rappresenta i dati e la business logic</td>
                    <td>Trip, Journey, PhotoNote, Note</td>
                </tr>
                <tr>
                    <td><strong>View</strong></td>
                    <td>Visualizza i dati e gestisce l'interazione utente</td>
                    <td>HomeFragment, MapFragment, TripDetailsFragment</td>
                </tr>
                <tr>
                    <td><strong>ViewModel</strong></td>
                    <td>Gestisce lo stato UI e comunica con il repository</td>
                    <td>HomeViewModel, MapViewModel, StatisticsViewModel</td>
                </tr>
            </tbody>
        </table>

        <h3>3.2 Flusso dei Dati</h3>

        <div class="code-block"><span class="comment">// Flusso dati unidirezionale</span>

            <span class="function">UI Event</span> ‚Üí <span class="function">ViewModel</span> ‚Üí <span
                class="function">Repository</span> ‚Üí <span class="function">DAO</span> ‚Üí <span class="function">Room
                DB</span>
            ‚Üë ‚îÇ
            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ <span class="keyword">Flow&lt;T&gt;</span> / <span class="keyword">LiveData&lt;T&gt;</span>
            ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

            <span class="comment">// Esempio pratico:</span>
            1. Utente clicca "Salva Viaggio" <span class="comment">// UI Event</span>
            2. ViewModel chiama repository.insertTrip() <span class="comment">// Business Logic</span>
            3. Repository converte Model ‚Üí Entity <span class="comment">// Data Mapping</span>
            4. DAO esegue INSERT nel database <span class="comment">// Persistence</span>
            5. Flow emette nuovo valore <span class="comment">// Reactive Update</span>
            6. UI si aggiorna automaticamente <span class="comment">// UI Refresh</span>
        </div>

        <!-- 4. STACK TECNOLOGICO -->
        <h2 id="tech-stack" class="page-break"><span class="section-number">4.</span> Stack Tecnologico</h2>

        <h3>4.1 Linguaggio e Build System</h3>
        <table>
            <thead>
                <tr>
                    <th>Tecnologia</th>
                    <th>Versione</th>
                    <th>Scopo</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Kotlin</td>
                    <td>1.9.21</td>
                    <td>Linguaggio principale di sviluppo</td>
                </tr>
                <tr>
                    <td>Gradle (AGP)</td>
                    <td>8.2.1</td>
                    <td>Build system e gestione dipendenze</td>
                </tr>
                <tr>
                    <td>JDK Target</td>
                    <td>17</td>
                    <td>Compatibilit√† Java</td>
                </tr>
                <tr>
                    <td>Min SDK</td>
                    <td>API 26 (Android 8.0)</td>
                    <td>Versione minima supportata</td>
                </tr>
                <tr>
                    <td>Target SDK</td>
                    <td>API 34 (Android 14)</td>
                    <td>Versione target</td>
                </tr>
            </tbody>
        </table>

        <h3>4.2 Android Jetpack</h3>
        <table>
            <thead>
                <tr>
                    <th>Libreria</th>
                    <th>Versione</th>
                    <th>Utilizzo</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Room</td>
                    <td>2.6.1</td>
                    <td>ORM per database SQLite locale</td>
                </tr>
                <tr>
                    <td>Navigation</td>
                    <td>2.7.6</td>
                    <td>Navigazione tra Fragment</td>
                </tr>
                <tr>
                    <td>Lifecycle</td>
                    <td>2.7.0</td>
                    <td>ViewModel e LiveData</td>
                </tr>
                <tr>
                    <td>WorkManager</td>
                    <td>2.9.0</td>
                    <td>Task periodici in background</td>
                </tr>
                <tr>
                    <td>CameraX</td>
                    <td>1.3.1</td>
                    <td>Cattura foto</td>
                </tr>
                <tr>
                    <td>Hilt</td>
                    <td>2.48</td>
                    <td>Dependency Injection</td>
                </tr>
            </tbody>
        </table>

        <h3>4.3 Librerie Esterne</h3>
        <table>
            <thead>
                <tr>
                    <th>Libreria</th>
                    <th>Versione</th>
                    <th>Utilizzo</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Google Maps SDK</td>
                    <td>18.2.0</td>
                    <td>Visualizzazione mappe interattive</td>
                </tr>
                <tr>
                    <td>Play Services Location</td>
                    <td>21.1.0</td>
                    <td>API di localizzazione e geofencing</td>
                </tr>
                <tr>
                    <td>MPAndroidChart</td>
                    <td>3.1.0</td>
                    <td>Grafici per statistiche</td>
                </tr>
                <tr>
                    <td>Glide</td>
                    <td>4.15.1</td>
                    <td>Caricamento e caching immagini</td>
                </tr>
                <tr>
                    <td>Timber</td>
                    <td>5.0.1</td>
                    <td>Logging avanzato</td>
                </tr>
                <tr>
                    <td>Gson</td>
                    <td>2.10.1</td>
                    <td>Serializzazione JSON</td>
                </tr>
            </tbody>
        </table>

        <!-- 5. STRUTTURA PROGETTO -->
        <h2 id="structure" class="page-break"><span class="section-number">5.</span> Struttura del Progetto</h2>

        <div class="code-block"><span class="keyword">app/</span>
            ‚îú‚îÄ‚îÄ <span class="keyword">src/main/</span>
            ‚îÇ ‚îú‚îÄ‚îÄ <span class="keyword">java/com/travelcompanion/</span>
            ‚îÇ ‚îÇ ‚îÇ
            ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ <span class="function">data/</span> <span class="comment">// üì¶ DATA LAYER</span>
            ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ <span class="function">db/</span>
            ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ AppDatabase.kt <span class="comment">// Database Room principale</span>
            ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ <span class="function">converters/</span> <span class="comment">// Type Converters</span>
            ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ <span class="function">dao/</span> <span class="comment">// Data Access Objects</span>
            ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ TripDao.kt
            ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ JourneyDao.kt
            ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ PhotoNoteDao.kt
            ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ NoteDao.kt
            ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ GeofenceAreaDao.kt
            ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ GeofenceEventDao.kt
            ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ <span class="function">entities/</span> <span class="comment">// Entit√† Room</span>
            ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ TripEntity.kt
            ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ JourneyEntity.kt
            ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ ...
            ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ <span class="function">repository/</span> <span class="comment">// Implementazioni</span>
            ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ TripRepository.kt
            ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ TravelRepositoryImpl.kt
            ‚îÇ ‚îÇ ‚îÇ
            ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ <span class="function">di/</span> <span class="comment">// üíâ DEPENDENCY INJECTION</span>
            ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ AppModule.kt <span class="comment">// Modulo Hilt</span>
            ‚îÇ ‚îÇ ‚îÇ
            ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ <span class="function">domain/</span> <span class="comment">// üéØ DOMAIN LAYER</span>
            ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ <span class="function">model/</span> <span class="comment">// Modelli di dominio</span>
            ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ Models.kt
            ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ Trip.kt
            ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ TripDetails.kt
            ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ TripStatistics.kt
            ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ <span class="function">repository/</span> <span class="comment">// Interfacce</span>
            ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ ITripRepository.kt
            ‚îÇ ‚îÇ ‚îÇ
            ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ <span class="function">ui/</span> <span class="comment">// üì± PRESENTATION LAYER</span>
            ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ <span class="function">home/</span> <span class="comment">// Dashboard</span>
            ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ <span class="function">map/</span> <span class="comment">// Google Maps</span>
            ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ <span class="function">newtrip/</span> <span class="comment">// Creazione viaggio</span>
            ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ <span class="function">settings/</span> <span class="comment">// Impostazioni</span>
            ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ <span class="function">statistics/</span> <span class="comment">// Grafici</span>
            ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ <span class="function">tracking/</span> <span class="comment">// GPS Tracking</span>
            ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ <span class="function">tripdetails/</span> <span class="comment">// Dettagli</span>
            ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ <span class="function">trips/</span> <span class="comment">// Lista viaggi</span>
            ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ <span class="function">worker/</span> <span class="comment">// Background tasks</span>
            ‚îÇ ‚îÇ ‚îÇ
            ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ <span class="function">utils/</span> <span class="comment">// üîß UTILITIES</span>
            ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ CameraHelper.kt
            ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ ChartUtils.kt
            ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ DateUtils.kt
            ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ GeofenceHelper.kt
            ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ LocationUtils.kt
            ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ NotificationUtils.kt
            ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ PermissionUtils.kt
            ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ PredictionEngine.kt
            ‚îÇ ‚îÇ ‚îÇ
            ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ MainActivity.kt <span class="comment">// Activity principale</span>
            ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ TravelCompanionApplication.kt <span class="comment">// Application class</span>
            ‚îÇ ‚îÇ
            ‚îÇ ‚îî‚îÄ‚îÄ <span class="keyword">res/</span> <span class="comment">// üé® RISORSE</span>
            ‚îÇ ‚îú‚îÄ‚îÄ <span class="function">layout/</span> <span class="comment">// Layout XML</span>
            ‚îÇ ‚îú‚îÄ‚îÄ <span class="function">navigation/</span> <span class="comment">// Nav Graph</span>
            ‚îÇ ‚îú‚îÄ‚îÄ <span class="function">values/</span> <span class="comment">// Strings, Colors</span>
            ‚îÇ ‚îî‚îÄ‚îÄ <span class="function">values-night/</span> <span class="comment">// Dark Theme</span>
            ‚îÇ
            ‚îî‚îÄ‚îÄ build.gradle <span class="comment">// Configurazione modulo</span></div>

        <!-- 6. DATA LAYER -->
        <h2 id="data-layer" class="page-break"><span class="section-number">6.</span> Data Layer</h2>

        <h3>6.1 Database Room</h3>
        <p>
            Il database locale √® implementato con <strong>Room</strong>, l'ORM ufficiale di Android Jetpack.
            Il database contiene 6 tabelle principali interconnesse tramite foreign keys.
        </p>

        <div class="code-block"><span class="annotation">@Database</span>(
            entities = [
            TripEntity::<span class="keyword">class</span>,
            JourneyEntity::<span class="keyword">class</span>,
            PhotoNoteEntity::<span class="keyword">class</span>,
            NoteEntity::<span class="keyword">class</span>,
            GeofenceAreaEntity::<span class="keyword">class</span>,
            GeofenceEventEntity::<span class="keyword">class</span>
            ],
            version = <span class="string">2</span>,
            exportSchema = <span class="keyword">false</span>
            )
            <span class="annotation">@TypeConverters</span>(Converters::<span class="keyword">class</span>)
            <span class="keyword">abstract class</span> <span class="function">AppDatabase</span> : RoomDatabase() {
            <span class="keyword">abstract fun</span> <span class="function">tripDao</span>(): TripDao
            <span class="keyword">abstract fun</span> <span class="function">journeyDao</span>(): JourneyDao
            <span class="keyword">abstract fun</span> <span class="function">photoNoteDao</span>(): PhotoNoteDao
            <span class="keyword">abstract fun</span> <span class="function">noteDao</span>(): NoteDao
            <span class="keyword">abstract fun</span> <span class="function">geofenceAreaDao</span>(): GeofenceAreaDao
            <span class="keyword">abstract fun</span> <span class="function">geofenceEventDao</span>(): GeofenceEventDao
            }
        </div>

        <h3>6.2 Schema del Database</h3>

        <table>
            <thead>
                <tr>
                    <th>Tabella</th>
                    <th>Descrizione</th>
                    <th>Relazioni</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>trips</strong></td>
                    <td>Informazioni principali del viaggio</td>
                    <td>1:N ‚Üí journeys, photos, notes</td>
                </tr>
                <tr>
                    <td><strong>journeys</strong></td>
                    <td>Singoli percorsi registrati</td>
                    <td>N:1 ‚Üí trips</td>
                </tr>
                <tr>
                    <td><strong>photo_notes</strong></td>
                    <td>Foto con note geolocalizzate</td>
                    <td>N:1 ‚Üí trips</td>
                </tr>
                <tr>
                    <td><strong>notes</strong></td>
                    <td>Annotazioni testuali</td>
                    <td>N:1 ‚Üí trips</td>
                </tr>
                <tr>
                    <td><strong>geofence_areas</strong></td>
                    <td>Aree geografiche monitorate</td>
                    <td>Standalone</td>
                </tr>
                <tr>
                    <td><strong>geofence_events</strong></td>
                    <td>Log eventi geofencing</td>
                    <td>N:1 ‚Üí geofence_areas</td>
                </tr>
            </tbody>
        </table>

        <h3>6.3 Entit√† TripEntity</h3>

        <div class="code-block"><span class="annotation">@Entity</span>(tableName = <span class="string">"trips"</span>)
            <span class="keyword">data class</span> <span class="function">TripEntity</span>(
            <span class="annotation">@PrimaryKey</span>(autoGenerate = <span class="keyword">true</span>)
            <span class="keyword">val</span> id: Long = <span class="string">0</span>,

            <span class="annotation">@ColumnInfo</span>(name = <span class="string">"title"</span>)
            <span class="keyword">val</span> title: String,

            <span class="annotation">@ColumnInfo</span>(name = <span class="string">"destination"</span>)
            <span class="keyword">val</span> destination: String,

            <span class="annotation">@ColumnInfo</span>(name = <span class="string">"trip_type"</span>)
            <span class="keyword">val</span> tripType: TripType, <span class="comment">// LOCAL, DAY_TRIP,
                MULTI_DAY</span>

            <span class="annotation">@ColumnInfo</span>(name = <span class="string">"start_date"</span>)
            <span class="keyword">val</span> startDate: Long, <span class="comment">// Timestamp Unix</span>

            <span class="annotation">@ColumnInfo</span>(name = <span class="string">"end_date"</span>)
            <span class="keyword">val</span> endDate: Long,

            <span class="annotation">@ColumnInfo</span>(name = <span class="string">"total_distance"</span>)
            <span class="keyword">val</span> totalDistance: Float = <span class="string">0f</span>, <span
                class="comment">// Metri</span>

            <span class="annotation">@ColumnInfo</span>(name = <span class="string">"total_duration"</span>)
            <span class="keyword">val</span> totalDuration: Long = <span class="string">0</span>, <span
                class="comment">// Millisecondi</span>

            <span class="annotation">@ColumnInfo</span>(name = <span class="string">"photo_count"</span>)
            <span class="keyword">val</span> photoCount: Int = <span class="string">0</span>,

            <span class="annotation">@ColumnInfo</span>(name = <span class="string">"is_tracking"</span>)
            <span class="keyword">val</span> isTracking: Boolean = <span class="keyword">false</span>
            )
        </div>

        <h3>6.4 Data Access Object (DAO)</h3>

        <div class="code-block"><span class="annotation">@Dao</span>
            <span class="keyword">interface</span> <span class="function">TripDao</span> {

            <span class="comment">// CRUD Operations</span>
            <span class="annotation">@Insert</span>(onConflict = OnConflictStrategy.REPLACE)
            <span class="keyword">suspend fun</span> <span class="function">insertTrip</span>(trip: TripEntity): Long

            <span class="annotation">@Update</span>
            <span class="keyword">suspend fun</span> <span class="function">updateTrip</span>(trip: TripEntity)

            <span class="annotation">@Delete</span>
            <span class="keyword">suspend fun</span> <span class="function">deleteTrip</span>(trip: TripEntity)

            <span class="comment">// Reactive Queries con Flow</span>
            <span class="annotation">@Query</span>(<span class="string">"SELECT * FROM trips ORDER BY start_date
                DESC"</span>)
            <span class="keyword">fun</span> <span class="function">getAllTripsFlow</span>():
            Flow&lt;List&lt;TripEntity&gt;&gt;

            <span class="annotation">@Query</span>(<span class="string">"SELECT * FROM trips WHERE trip_type =
                :type"</span>)
            <span class="keyword">fun</span> <span class="function">getTripsByTypeFlow</span>(type: TripType):
            Flow&lt;List&lt;TripEntity&gt;&gt;

            <span class="comment">// Full-Text Search</span>
            <span class="annotation">@Query</span>(<span class="string">"""
                SELECT * FROM trips
                WHERE title LIKE '%' || :query || '%'
                OR destination LIKE '%' || :query || '%'
                ORDER BY start_date DESC
                """</span>)
            <span class="keyword">fun</span> <span class="function">searchTrips</span>(query: String):
            Flow&lt;List&lt;TripEntity&gt;&gt;

            <span class="comment">// Statistics Query</span>
            <span class="annotation">@Query</span>(<span class="string">"""
                SELECT COUNT(*) as total,
                SUM(total_distance) as totalDistance,
                AVG(total_duration) as avgDuration
                FROM trips
                """</span>)
            <span class="keyword">fun</span> <span class="function">getStatistics</span>(): Flow&lt;TripStatistics&gt;
            }
        </div>

        <!-- 7. DOMAIN LAYER -->
        <h2 id="domain-layer" class="page-break"><span class="section-number">7.</span> Domain Layer</h2>

        <h3>7.1 Modelli di Dominio</h3>
        <p>
            I modelli di dominio sono classi Kotlin pure, indipendenti dal framework Android e dalla persistenza.
            Rappresentano i concetti business dell'applicazione.
        </p>

        <div class="code-block"><span class="comment">// Modello principale: Trip</span>
            <span class="keyword">data class</span> <span class="function">Trip</span>(
            <span class="keyword">val</span> id: Long = <span class="string">0</span>,
            <span class="keyword">val</span> title: String,
            <span class="keyword">val</span> destination: String,
            <span class="keyword">val</span> tripType: TripType,
            <span class="keyword">val</span> startDate: Date,
            <span class="keyword">val</span> endDate: Date?,
            <span class="keyword">val</span> totalDistance: Float = <span class="string">0f</span>,
            <span class="keyword">val</span> totalDuration: Long = <span class="string">0</span>,
            <span class="keyword">val</span> photoCount: Int = <span class="string">0</span>,
            <span class="keyword">val</span> notes: String = <span class="string">""</span>,
            <span class="keyword">val</span> isTracking: Boolean = <span class="keyword">false</span>
            )

            <span class="comment">// Enum per tipo viaggio</span>
            <span class="keyword">enum class</span> <span class="function">TripType</span> {
            LOCAL, <span class="comment">// Viaggio locale</span>
            DAY_TRIP, <span class="comment">// Gita giornaliera</span>
            MULTI_DAY <span class="comment">// Viaggio multi-giorno</span>
            }

            <span class="comment">// Coordinate GPS</span>
            <span class="keyword">data class</span> <span class="function">Coordinate</span>(
            <span class="keyword">val</span> latitude: Double,
            <span class="keyword">val</span> longitude: Double,
            <span class="keyword">val</span> timestamp: Date = Date()
            )

            <span class="comment">// Percorso registrato</span>
            <span class="keyword">data class</span> <span class="function">Journey</span>(
            <span class="keyword">val</span> id: Long = <span class="string">0</span>,
            <span class="keyword">val</span> tripId: Long,
            <span class="keyword">val</span> startTime: Date,
            <span class="keyword">val</span> endTime: Date?,
            <span class="keyword">val</span> distance: Float = <span class="string">0f</span>,
            <span class="keyword">val</span> coordinates: List&lt;Coordinate&gt; = emptyList()
            )
        </div>

        <h3>7.2 Repository Interface</h3>

        <div class="code-block"><span class="keyword">interface</span> <span class="function">ITripRepository</span> {

            <span class="comment">// Trip CRUD</span>
            <span class="keyword">suspend fun</span> <span class="function">insertTrip</span>(trip: Trip): Long
            <span class="keyword">suspend fun</span> <span class="function">updateTrip</span>(trip: Trip)
            <span class="keyword">suspend fun</span> <span class="function">deleteTrip</span>(trip: Trip)
            <span class="keyword">suspend fun</span> <span class="function">getTripById</span>(id: Long): Trip?

            <span class="comment">// Reactive Queries</span>
            <span class="keyword">fun</span> <span class="function">getAllTrips</span>(): Flow&lt;List&lt;Trip&gt;&gt;
            <span class="keyword">fun</span> <span class="function">getTripsByType</span>(type: TripType):
            Flow&lt;List&lt;Trip&gt;&gt;
            <span class="keyword">fun</span> <span class="function">getTripsBetweenDates</span>(start: Date, end: Date):
            Flow&lt;List&lt;Trip&gt;&gt;

            <span class="comment">// Journey Operations</span>
            <span class="keyword">suspend fun</span> <span class="function">insertJourney</span>(journey: Journey): Long
            <span class="keyword">fun</span> <span class="function">getJourneysByTripId</span>(tripId: Long):
            Flow&lt;List&lt;Journey&gt;&gt;

            <span class="comment">// Statistics</span>
            <span class="keyword">suspend fun</span> <span class="function">getTotalDistance</span>(): Float
            <span class="keyword">suspend fun</span> <span class="function">getTotalDuration</span>(): Long
            <span class="keyword">suspend fun</span> <span class="function">getTripCount</span>(): Int
            <span class="keyword">suspend fun</span> <span class="function">getMonthlyStats</span>():
            List&lt;MonthlyStat&gt;
            }
        </div>

        <!-- 8. UI LAYER -->
        <h2 id="ui-layer" class="page-break"><span class="section-number">8.</span> UI Layer</h2>

        <h3>8.1 Navigazione</h3>
        <p>
            L'applicazione utilizza <strong>Navigation Component</strong> con un <strong>BottomNavigationView</strong>
            per la navigazione principale tra le sezioni.
        </p>

        <div class="screen-flow">
            <span class="screen-item">üè† Home</span>
            <span class="screen-arrow">‚Üî</span>
            <span class="screen-item">üìã Trips</span>
            <span class="screen-arrow">‚Üî</span>
            <span class="screen-item">üó∫Ô∏è Map</span>
            <span class="screen-arrow">‚Üî</span>
            <span class="screen-item">üìä Statistics</span>
            <span class="screen-arrow">‚Üî</span>
            <span class="screen-item">‚öôÔ∏è Settings</span>
        </div>

        <h3>8.2 MainActivity</h3>

        <div class="code-block"><span class="annotation">@AndroidEntryPoint</span>
            <span class="keyword">class</span> <span class="function">MainActivity</span> : AppCompatActivity() {

            <span class="keyword">private lateinit var</span> binding: ActivityMainBinding

            <span class="keyword">override fun</span> <span class="function">onCreate</span>(savedInstanceState:
            Bundle?) {
            <span class="keyword">super</span>.onCreate(savedInstanceState)
            binding = ActivityMainBinding.inflate(layoutInflater)
            setContentView(binding.root)

            setupNavigation()
            setupHapticFeedback()
            }

            <span class="keyword">private fun</span> <span class="function">setupNavigation</span>() {
            <span class="keyword">val</span> navHostFragment = supportFragmentManager
            .findFragmentById(R.id.fragment_container) <span class="keyword">as</span> NavHostFragment
            <span class="keyword">val</span> navController = navHostFragment.navController

            <span class="comment">// Collega BottomNav con NavController</span>
            binding.bottomNavigation.setupWithNavController(navController)

            <span class="comment">// Feedback aptico su tap</span>
            <span class="keyword">val</span> vibrator = getSystemService(VIBRATOR_SERVICE) <span
                class="keyword">as</span> Vibrator
            binding.bottomNavigation.setOnItemSelectedListener { item ->
            <span class="keyword">if</span> (vibrator.hasVibrator()) {
            vibrator.vibrate(VibrationEffect.createOneShot(<span class="string">50</span>, DEFAULT_AMPLITUDE))
            }
            NavigationUI.onNavDestinationSelected(item, navController)
            <span class="keyword">true</span>
            }
            }
            }
        </div>

        <h3>8.3 ViewModel Pattern</h3>

        <div class="code-block"><span class="annotation">@HiltViewModel</span>
            <span class="keyword">class</span> <span class="function">HomeViewModel</span> <span
                class="annotation">@Inject</span> <span class="keyword">constructor</span>(
            <span class="keyword">private val</span> repository: ITripRepository
            ) : ViewModel() {

            <span class="comment">// State esposto come LiveData immutabile</span>
            <span class="keyword">private val</span> _quickStats = MutableLiveData&lt;QuickStats&gt;()
            <span class="keyword">val</span> quickStats: LiveData&lt;QuickStats&gt; = _quickStats

            <span class="keyword">private val</span> _recentTrips = MutableLiveData&lt;List&lt;Trip&gt;&gt;()
            <span class="keyword">val</span> recentTrips: LiveData&lt;List&lt;Trip&gt;&gt; = _recentTrips

            <span class="keyword">init</span> {
            loadData()
            }

            <span class="keyword">private fun</span> <span class="function">loadData</span>() {
            viewModelScope.launch {
            <span class="comment">// Carica statistiche rapide</span>
            <span class="keyword">val</span> totalTrips = repository.getTripCount()
            <span class="keyword">val</span> totalDistance = repository.getTotalDistance()
            _quickStats.value = QuickStats(totalTrips, totalDistance)

            <span class="comment">// Osserva viaggi recenti con Flow</span>
            repository.getAllTrips()
            .take(<span class="string">5</span>)
            .collect { trips ->
            _recentTrips.value = trips
            }
            }
            }
            }
        </div>

        <!-- 9. FUNZIONALIT√Ä -->
        <h2 id="features" class="page-break"><span class="section-number">9.</span> Funzionalit√† Principali</h2>

        <div class="feature-grid">
            <div class="feature-card">
                <div class="feature-icon">üìç</div>
                <h4>GPS Tracking</h4>
                <p>Registrazione continua della posizione con Foreground Service.
                    Aggiornamenti ogni 5 secondi con precisione PRIORITY_HIGH_ACCURACY.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üó∫Ô∏è</div>
                <h4>Mappe Interattive</h4>
                <p>Visualizzazione dei percorsi su Google Maps con polyline, marker
                    per foto e aree di geofencing.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üì∏</div>
                <h4>Foto Geolocalizzate</h4>
                <p>Cattura foto durante il viaggio con CameraX. Ogni foto √®
                    automaticamente associata alle coordinate GPS.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üìù</div>
                <h4>Note di Viaggio</h4>
                <p>Annotazioni testuali con geolocalizzazione opzionale.
                    Supporto per testo formattato e timestamp.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üìä</div>
                <h4>Statistiche Avanzate</h4>
                <p>Dashboard con grafici MPAndroidChart: distanze mensili,
                    distribuzione per tipo, durate medie.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üîî</div>
                <h4>Geofencing</h4>
                <p>Creazione di aree geografiche con notifiche automatiche
                    all'ingresso/uscita dalla zona.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">‚è∞</div>
                <h4>Reminder Periodici</h4>
                <p>WorkManager schedula notifiche giornaliere per incoraggiare
                    l'utente a registrare nuovi viaggi.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üåô</div>
                <h4>Tema Scuro</h4>
                <p>Supporto completo per Dark Mode con Material Design 3.
                    Segue automaticamente le preferenze di sistema.</p>
            </div>
        </div>

        <h3>9.1 Tracking Service</h3>

        <div class="code-block"><span class="annotation">@AndroidEntryPoint</span>
            <span class="keyword">class</span> <span class="function">TrackingService</span> : Service() {

            <span class="annotation">@Inject</span> <span class="keyword">lateinit var</span> repository:
            ITripRepository

            <span class="keyword">private lateinit var</span> fusedLocationClient: FusedLocationProviderClient
            <span class="keyword">private val</span> serviceScope = CoroutineScope(SupervisorJob() + Dispatchers.IO)
            <span class="keyword">private val</span> coordinates = mutableListOf&lt;Coordinate&gt;()

            <span class="keyword">override fun</span> <span class="function">onStartCommand</span>(intent: Intent?,
            flags: Int, startId: Int): Int {
            intent?.getLongExtra(EXTRA_TRIP_ID, -<span class="string">1</span>)?.let { tripId ->
            currentTripId = tripId
            startTracking()
            startForeground(NOTIFICATION_ID, createNotification())
            }
            <span class="keyword">return</span> START_STICKY
            }

            <span class="keyword">private fun</span> <span class="function">startTracking</span>() {
            <span class="keyword">val</span> locationRequest = LocationRequest.Builder(
            Priority.PRIORITY_HIGH_ACCURACY,
            <span class="string">5000L</span> <span class="comment">// 5 secondi</span>
            )
            .setMinUpdateIntervalMillis(<span class="string">2000L</span>)
            .setMinUpdateDistanceMeters(<span class="string">10f</span>)
            .build()

            locationCallback = <span class="keyword">object</span> : LocationCallback() {
            <span class="keyword">override fun</span> <span class="function">onLocationResult</span>(result:
            LocationResult) {
            result.lastLocation?.let { location ->
            serviceScope.launch {
            saveLocation(location)
            }
            }
            }
            }

            fusedLocationClient.requestLocationUpdates(
            locationRequest,
            locationCallback,
            Looper.getMainLooper()
            )
            }
            }
        </div>

        <!-- 10. DEPENDENCY INJECTION -->
        <h2 id="di" class="page-break"><span class="section-number">10.</span> Dependency Injection</h2>

        <p>
            L'applicazione utilizza <strong>Hilt</strong> per la dependency injection, semplificando
            la gestione del ciclo di vita delle dipendenze e migliorando la testabilit√†.
        </p>

        <div class="code-block"><span class="annotation">@Module</span>
            <span class="annotation">@InstallIn</span>(SingletonComponent::<span class="keyword">class</span>)
            <span class="keyword">object</span> <span class="function">AppModule</span> {

            <span class="annotation">@Provides</span>
            <span class="annotation">@Singleton</span>
            <span class="keyword">fun</span> <span class="function">provideAppDatabase</span>(
            <span class="annotation">@ApplicationContext</span> context: Context
            ): AppDatabase {
            <span class="keyword">return</span> Room.databaseBuilder(
            context,
            AppDatabase::<span class="keyword">class</span>.java,
            <span class="string">"travel_companion_db"</span>
            )
            .fallbackToDestructiveMigration()
            .build()
            }

            <span class="annotation">@Provides</span>
            <span class="annotation">@Singleton</span>
            <span class="keyword">fun</span> <span class="function">provideTripRepository</span>(
            database: AppDatabase
            ): ITripRepository {
            <span class="keyword">return</span> TripRepository(database)
            }

            <span class="annotation">@Provides</span>
            <span class="annotation">@IoDispatcher</span>
            <span class="keyword">fun</span> <span class="function">provideIoDispatcher</span>(): CoroutineDispatcher =
            Dispatchers.IO

            <span class="annotation">@Provides</span>
            <span class="annotation">@MainDispatcher</span>
            <span class="keyword">fun</span> <span class="function">provideMainDispatcher</span>(): CoroutineDispatcher
            = Dispatchers.Main
            }

            <span class="comment">// Qualifiers per dispatcher</span>
            <span class="annotation">@Retention</span>(AnnotationRetention.BINARY)
            <span class="annotation">@Qualifier</span>
            <span class="keyword">annotation class</span> <span class="function">IoDispatcher</span>

            <span class="annotation">@Retention</span>(AnnotationRetention.BINARY)
            <span class="annotation">@Qualifier</span>
            <span class="keyword">annotation class</span> <span class="function">MainDispatcher</span>
        </div>

        <!-- 11. PERMESSI -->
        <h2 id="permissions" class="page-break"><span class="section-number">11.</span> Permessi e Sicurezza</h2>

        <h3>11.1 Permessi Richiesti</h3>

        <table>
            <thead>
                <tr>
                    <th>Permesso</th>
                    <th>Tipo</th>
                    <th>Utilizzo</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>ACCESS_FINE_LOCATION</td>
                    <td>üî¥ Dangerous</td>
                    <td>Tracking GPS preciso</td>
                </tr>
                <tr>
                    <td>ACCESS_COARSE_LOCATION</td>
                    <td>üî¥ Dangerous</td>
                    <td>Localizzazione approssimativa</td>
                </tr>
                <tr>
                    <td>ACCESS_BACKGROUND_LOCATION</td>
                    <td>üî¥ Dangerous</td>
                    <td>Tracking con app in background</td>
                </tr>
                <tr>
                    <td>CAMERA</td>
                    <td>üî¥ Dangerous</td>
                    <td>Cattura foto</td>
                </tr>
                <tr>
                    <td>READ_MEDIA_IMAGES</td>
                    <td>üî¥ Dangerous</td>
                    <td>Accesso galleria (API 33+)</td>
                </tr>
                <tr>
                    <td>POST_NOTIFICATIONS</td>
                    <td>üî¥ Dangerous</td>
                    <td>Notifiche (API 33+)</td>
                </tr>
                <tr>
                    <td>FOREGROUND_SERVICE</td>
                    <td>üü¢ Normal</td>
                    <td>Servizio in foreground</td>
                </tr>
                <tr>
                    <td>FOREGROUND_SERVICE_LOCATION</td>
                    <td>üü¢ Normal</td>
                    <td>Servizio location</td>
                </tr>
                <tr>
                    <td>INTERNET</td>
                    <td>üü¢ Normal</td>
                    <td>Google Maps tiles</td>
                </tr>
                <tr>
                    <td>VIBRATE</td>
                    <td>üü¢ Normal</td>
                    <td>Feedback aptico</td>
                </tr>
            </tbody>
        </table>

        <h3>11.2 Gestione API Key</h3>

        <div class="info-box warning">
            <span class="info-box-icon">‚ö†Ô∏è</span>
            <div class="info-box-content">
                <h4>Sicurezza API Key Google Maps</h4>
                <p>La chiave API viene iniettata tramite <code class="inline-code">gradle.properties</code> o variabili
                    d'ambiente
                    per evitare di committarla nel repository:</p>
            </div>
        </div>

        <div class="code-block"><span class="comment">// build.gradle (app)</span>
            <span class="keyword">def</span> mapsApiKey = (project.findProperty(<span
                class="string">"MAPS_API_KEY"</span>)
            ?: System.getenv(<span class="string">"MAPS_API_KEY"</span>) ?: <span class="string">""</span>) <span
                class="keyword">as</span> String
            manifestPlaceholders = [MAPS_API_KEY: mapsApiKey]

            <span class="comment">// AndroidManifest.xml</span>
            &lt;meta-data
            android:name=<span class="string">"com.google.android.geo.API_KEY"</span>
            android:value=<span class="string">"${MAPS_API_KEY}"</span> /&gt;
        </div>

        <!-- 12. TESTING -->
        <h2 id="testing" class="page-break"><span class="section-number">12.</span> Testing</h2>

        <h3>12.1 Strategia di Testing</h3>

        <table>
            <thead>
                <tr>
                    <th>Tipo</th>
                    <th>Framework</th>
                    <th>Scopo</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Unit Tests</td>
                    <td>JUnit 4 + Mockito</td>
                    <td>ViewModel, Repository, Utils</td>
                </tr>
                <tr>
                    <td>DAO Tests</td>
                    <td>Room Testing</td>
                    <td>Query database in-memory</td>
                </tr>
                <tr>
                    <td>UI Tests</td>
                    <td>Espresso</td>
                    <td>Interazioni utente</td>
                </tr>
                <tr>
                    <td>Coroutines Tests</td>
                    <td>kotlinx-coroutines-test</td>
                    <td>Test asincroni</td>
                </tr>
            </tbody>
        </table>

        <h3>12.2 Dipendenze di Test</h3>

        <div class="code-block"><span class="comment">// Unit Tests</span>
            testImplementation <span class="string">'junit:junit:4.13.2'</span>
            testImplementation <span class="string">'org.mockito:mockito-core:5.7.0'</span>
            testImplementation <span class="string">'org.mockito:mockito-inline:5.2.0'</span>
            testImplementation <span class="string">'androidx.arch.core:core-testing:2.2.0'</span>
            testImplementation <span class="string">'org.jetbrains.kotlinx:kotlinx-coroutines-test:1.7.3'</span>

            <span class="comment">// Instrumented Tests</span>
            androidTestImplementation <span class="string">'androidx.test.ext:junit:1.1.5'</span>
            androidTestImplementation <span class="string">'androidx.test.espresso:espresso-core:3.5.1'</span>
            androidTestImplementation <span class="string">'androidx.room:room-testing:2.6.1'</span>
            androidTestImplementation <span class="string">'androidx.test:runner:1.5.2'</span>
            androidTestImplementation <span class="string">'androidx.test:rules:1.5.0'</span>
        </div>

        <!-- 13. BUILD & DEPLOY -->
        <h2 id="build" class="page-break"><span class="section-number">13.</span> Build &amp; Deploy</h2>

        <h3>13.1 Requisiti di Build</h3>
        <ul>
            <li><strong>Android Studio:</strong> Hedgehog (2023.1.1) o superiore</li>
            <li><strong>JDK:</strong> 17</li>
            <li><strong>Gradle:</strong> 8.2</li>
            <li><strong>Android SDK:</strong> 34</li>
            <li><strong>Kotlin:</strong> 1.9.21</li>
        </ul>

        <h3>13.2 Comandi Gradle</h3>

        <div class="code-block"><span class="comment"># Build APK Debug</span>
            ./gradlew assembleDebug

            <span class="comment"># Build APK Release</span>
            ./gradlew assembleRelease

            <span class="comment"># Esegui tutti i test</span>
            ./gradlew test

            <span class="comment"># Test strumentati</span>
            ./gradlew connectedAndroidTest

            <span class="comment"># Clean &amp; Build</span>
            ./gradlew clean build

            <span class="comment"># Analisi Lint</span>
            ./gradlew lint
        </div>

        <h3>13.3 Configurazione Release</h3>

        <div class="code-block">android {
            buildTypes {
            release {
            minifyEnabled = <span class="keyword">true</span>
            shrinkResources = <span class="keyword">true</span>
            proguardFiles = [
            getDefaultProguardFile(<span class="string">'proguard-android-optimize.txt'</span>),
            <span class="string">'proguard-rules.pro'</span>
            ]
            signingConfig = signingConfigs.release
            }
            }
            }
        </div>

        <!-- 14. CONCLUSIONI -->
        <h2 id="conclusion" class="page-break"><span class="section-number">14.</span> Conclusioni</h2>

        <p>
            <strong>Travel Companion</strong> rappresenta un'implementazione completa di un'applicazione
            Android moderna, seguendo le best practices raccomandate da Google e la community Android.
        </p>

        <h3>14.1 Punti di Forza</h3>
        <ul>
            <li>‚úÖ <strong>Architettura Solida:</strong> Clean Architecture + MVVM garantiscono manutenibilit√†</li>
            <li>‚úÖ <strong>Modern Android:</strong> Utilizzo di Jetpack, Coroutines, Flow, Hilt</li>
            <li>‚úÖ <strong>UX Completa:</strong> Tracking GPS, mappe, foto, statistiche in un'unica app</li>
            <li>‚úÖ <strong>Privacy First:</strong> Tutti i dati memorizzati localmente</li>
            <li>‚úÖ <strong>Testabilit√†:</strong> DI e separazione dei layer facilitano il testing</li>
        </ul>

        <h3>14.2 Possibili Miglioramenti Futuri</h3>
        <ul>
            <li>üîÆ Sincronizzazione cloud con Firebase/Supabase</li>
            <li>üîÆ Export/Import dati in formato GPX</li>
            <li>üîÆ Condivisione viaggi con altri utenti</li>
            <li>üîÆ Widget per la home screen</li>
            <li>üîÆ Wear OS companion app</li>
            <li>üîÆ Machine Learning per suggerimenti personalizzati</li>
        </ul>

        <div class="info-box success">
            <span class="info-box-icon">üéØ</span>
            <div class="info-box-content">
                <h4>Obiettivi Raggiunti</h4>
                <p>Il progetto soddisfa tutti i requisiti funzionali e tecnici definiti,
                    implementando un'applicazione completa per il tracciamento dei viaggi con
                    un'architettura scalabile e codice di qualit√†.</p>
            </div>
        </div>

        <!-- FOOTER -->
        <div class="doc-footer">
            <p><strong>Travel Companion</strong> - Documentazione Tecnica</p>
            <p>Versione 1.0 | Gennaio 2026</p>
            <p>Sviluppato con ‚ù§Ô∏è usando Kotlin e Android Jetpack</p>
        </div>

    </div>

</body>

</html>